module.exports=function(t){var e={};function r(o){if(e[o])return e[o].exports;var n=e[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=t,r.c=e,r.d=function(t,e,o){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(o,n,function(e){return t[e]}.bind(null,n));return o},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=3)}([function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.StructureMap=class{constructor(t){this.sourcemap=[],t.find(FIND_SOURCES).forEach(t=>{this.sourcemap.push(new o(t))})}};class o{constructor(t){this.spaces=0,this.pos=t.pos;var e=this.pos.x-1,r=this.pos.x+1,o=this.pos.y-1,n=this.pos.y+1;for(let s=e;s<=r;s++)for(let e=o;e<=n;e++){var u=t.room.lookAt(s,e);"terrain"==u[0].type&&"wall"!=u[0].terrain&&(this.spaces+=1)}}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.RoomMem=class{constructor(t){this.isSetup=!1,this.StructMap=t.StructMap}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const o=r(1),n=r(0);function u(t){var e=new o.RoomMem(t.memory);e.StructMap||(console.log("Setting up structure map for room: ",t.name),e.StructMap=new n.StructureMap(t),t.memory=e)}function s(t){var e=t.find(FIND_MY_SPAWNS)[0];if(t.memory.StructMap.sourcemap.forEach(r=>{t.findPath(e.pos,r.pos).forEach(e=>{t.createConstructionSite(e.x,e.y,STRUCTURE_ROAD)})}),t.controller){var r=t.controller;t.findPath(e.pos,r.pos).forEach(e=>{t.createConstructionSite(e.x,e.y,STRUCTURE_ROAD)})}}e.Setup=function(){for(var t in Game.rooms){var e=Game.rooms[t],r=e.memory;r.isSetup||(u(e),s(e),r.isSetup=!0,e.memory=r)}}},function(t,e,r){"use strict";var o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});const n=o(r(2));e.loop=function(){n.Setup()}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL1Jvb21NYW5hZ2VyL1Jvb21NYW5hZ2VyTW9kZWxzLnRzIiwid2VicGFjazovLy8uL3NyYy9HbG9iYWwudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1Jvb21NYW5hZ2VyL2luZGV4LnRzIiwid2VicGFjazovLy8uL3NyYy9tYWluLnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiU3RydWN0dXJlTWFwIiwiW29iamVjdCBPYmplY3RdIiwicm9vbSIsInRoaXMiLCJzb3VyY2VtYXAiLCJmaW5kIiwiRklORF9TT1VSQ0VTIiwiZm9yRWFjaCIsInNvdXJjZSIsInB1c2giLCJTb3VyY2VJbmZvIiwic3BhY2VzIiwicG9zIiwibGVmdCIsIngiLCJyaWdodCIsInRvcCIsInkiLCJib3QiLCJzcG90IiwibG9va0F0IiwidHlwZSIsInRlcnJhaW4iLCJSb29tTWVtIiwiZGF0YSIsImlzU2V0dXAiLCJTdHJ1Y3RNYXAiLCJHbG9iYWxfMSIsIlJvb21NYW5hZ2VyTW9kZWxzXzEiLCJDcmVhdGVTdHJ1Y3R1cmVNYXAiLCJyb29tTWVtIiwibWVtb3J5IiwiY29uc29sZSIsImxvZyIsIkNyZWF0ZVN0YXJ0aW5nUGF0aHMiLCJzcGF3biIsIkZJTkRfTVlfU1BBV05TIiwiZmluZFBhdGgiLCJwb3NpdGlvbiIsImNyZWF0ZUNvbnN0cnVjdGlvblNpdGUiLCJTVFJVQ1RVUkVfUk9BRCIsImNvbnRyb2xsZXIiLCJjdHIiLCJTZXR1cCIsIkdhbWUiLCJyb29tcyIsIlJNIiwiX19pbXBvcnRTdGFyIiwibG9vcCJdLCJtYXBwaW5ncyI6IjJCQUNBLElBQUFBLEtBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFDLFFBR0EsSUFBQUMsRUFBQUosRUFBQUUsSUFDQUcsRUFBQUgsRUFDQUksR0FBQSxFQUNBSCxZQVVBLE9BTkFJLEVBQUFMLEdBQUFNLEtBQUFKLEVBQUFELFFBQUFDLElBQUFELFFBQUFGLEdBR0FHLEVBQUFFLEdBQUEsRUFHQUYsRUFBQUQsUUEwREEsT0FyREFGLEVBQUFRLEVBQUFGLEVBR0FOLEVBQUFTLEVBQUFWLEVBR0FDLEVBQUFVLEVBQUEsU0FBQVIsRUFBQVMsRUFBQUMsR0FDQVosRUFBQWEsRUFBQVgsRUFBQVMsSUFDQUcsT0FBQUMsZUFBQWIsRUFBQVMsR0FBMENLLFlBQUEsRUFBQUMsSUFBQUwsS0FLMUNaLEVBQUFrQixFQUFBLFNBQUFoQixHQUNBLG9CQUFBaUIsZUFBQUMsYUFDQU4sT0FBQUMsZUFBQWIsRUFBQWlCLE9BQUFDLGFBQXdEQyxNQUFBLFdBRXhEUCxPQUFBQyxlQUFBYixFQUFBLGNBQWlEbUIsT0FBQSxLQVFqRHJCLEVBQUFzQixFQUFBLFNBQUFELEVBQUFFLEdBRUEsR0FEQSxFQUFBQSxJQUFBRixFQUFBckIsRUFBQXFCLElBQ0EsRUFBQUUsRUFBQSxPQUFBRixFQUNBLEtBQUFFLEdBQUEsaUJBQUFGLFFBQUFHLFdBQUEsT0FBQUgsRUFDQSxJQUFBSSxFQUFBWCxPQUFBWSxPQUFBLE1BR0EsR0FGQTFCLEVBQUFrQixFQUFBTyxHQUNBWCxPQUFBQyxlQUFBVSxFQUFBLFdBQXlDVCxZQUFBLEVBQUFLLFVBQ3pDLEVBQUFFLEdBQUEsaUJBQUFGLEVBQUEsUUFBQU0sS0FBQU4sRUFBQXJCLEVBQUFVLEVBQUFlLEVBQUFFLEVBQUEsU0FBQUEsR0FBZ0gsT0FBQU4sRUFBQU0sSUFBcUJDLEtBQUEsS0FBQUQsSUFDckksT0FBQUYsR0FJQXpCLEVBQUE2QixFQUFBLFNBQUExQixHQUNBLElBQUFTLEVBQUFULEtBQUFxQixXQUNBLFdBQTJCLE9BQUFyQixFQUFBLFNBQzNCLFdBQWlDLE9BQUFBLEdBRWpDLE9BREFILEVBQUFVLEVBQUFFLEVBQUEsSUFBQUEsR0FDQUEsR0FJQVosRUFBQWEsRUFBQSxTQUFBaUIsRUFBQUMsR0FBc0QsT0FBQWpCLE9BQUFrQixVQUFBQyxlQUFBMUIsS0FBQXVCLEVBQUFDLElBR3REL0IsRUFBQWtDLEVBQUEsR0FJQWxDLElBQUFtQyxFQUFBLG1GQ2pGQWpDLEVBQUFrQyxtQkFNSUMsWUFBWUMsR0FMWkMsS0FBQUMsYUFNa0JGLEVBQUtHLEtBQUtDLGNBQ2hCQyxRQUFRQyxJQUNaTCxLQUFLQyxVQUFVSyxLQUFLLElBQUlDLEVBQVdGLGNBTS9DRSxFQU9JVCxZQUFZTyxHQUxaTCxLQUFBUSxPQUFpQixFQU1iUixLQUFLUyxJQUFNSixFQUFPSSxJQUNsQixJQUFJQyxFQUFPVixLQUFLUyxJQUFJRSxFQUFHLEVBQ25CQyxFQUFRWixLQUFLUyxJQUFJRSxFQUFJLEVBQ3JCRSxFQUFNYixLQUFLUyxJQUFJSyxFQUFJLEVBQ25CQyxFQUFNZixLQUFLUyxJQUFJSyxFQUFJLEVBRXZCLElBQUssSUFBSUgsRUFBSUQsRUFBTUMsR0FBS0MsRUFBT0QsSUFDM0IsSUFBSyxJQUFJRyxFQUFJRCxFQUFLQyxHQUFLQyxFQUFLRCxJQUFLLENBQzdCLElBQUlFLEVBQU9YLEVBQU9OLEtBQUtrQixPQUFPTixFQUFFRyxHQUNiLFdBQWhCRSxFQUFLLEdBQUdFLE1BQXdDLFFBQW5CRixFQUFLLEdBQUdHLFVBQ3BDbkIsS0FBS1EsUUFBVSxxRkMzQm5DN0MsRUFBQXlELGNBTUl0QixZQUFZdUIsR0FMWnJCLEtBQUFzQixTQUFpQixFQU1idEIsS0FBS3VCLFVBQVlGLEVBQUtFLDJGQ2Q5QixNQUFBQyxFQUFBL0QsRUFBQSxHQUNBZ0UsRUFBQWhFLEVBQUEsR0FrQkEsU0FBQWlFLEVBQTRCM0IsR0FDeEIsSUFBSTRCLEVBQVcsSUFBSUgsRUFBQUosUUFBUXJCLEVBQUs2QixRQUM1QkQsRUFBUUosWUFDUk0sUUFBUUMsSUFBSSxzQ0FBdUMvQixFQUFLM0IsTUFDeER1RCxFQUFRSixVQUFZLElBQUlFLEVBQUE1QixhQUFhRSxHQUNyQ0EsRUFBSzZCLE9BQVNELEdBSXRCLFNBQUFJLEVBQTZCaEMsR0FDekIsSUFBSWlDLEVBQVFqQyxFQUFLRyxLQUFLK0IsZ0JBQWdCLEdBUXRDLEdBUENsQyxFQUFLNkIsT0FBbUJMLFVBQVV0QixVQUFVRyxRQUFRQyxJQUV0Q04sRUFBS21DLFNBQVNGLEVBQU12QixJQUFLSixFQUFPSSxLQUN0Q0wsUUFBUStCLElBQ1RwQyxFQUFLcUMsdUJBQXVCRCxFQUFTeEIsRUFBR3dCLEVBQVNyQixFQUFHdUIsb0JBR3pEdEMsRUFBS3VDLFdBQVcsQ0FDZixJQUFJQyxFQUFPeEMsRUFBS3VDLFdBQ0x2QyxFQUFLbUMsU0FBU0YsRUFBTXZCLElBQUs4QixFQUFJOUIsS0FDbkNMLFFBQVErQixJQUNUcEMsRUFBS3FDLHVCQUF1QkQsRUFBU3hCLEVBQUd3QixFQUFTckIsRUFBR3VCLG1CQXBDaEUxRSxFQUFBNkUsTUFBQSxXQUNJLElBQUssSUFBSXBELEtBQU9xRCxLQUFLQyxNQUFPLENBQ3hCLElBQUkzQyxFQUFPMEMsS0FBS0MsTUFBTXRELEdBQ2xCdUMsRUFBVzVCLEVBQUs2QixPQUNoQkQsRUFBUUwsVUFDUkksRUFBbUIzQixHQUNuQmdDLEVBQW9CaEMsR0FDcEI0QixFQUFRTCxTQUFVLEVBQ2xCdkIsRUFBSzZCLE9BQVNELGlRQ2IxQixNQUFBZ0IsRUFBQUMsRUFBQW5GLEVBQUEsSUFFYUUsRUFBQWtGLEtBQU8sV0FDWkYsRUFBR0giLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAzKTtcbiIsIlxyXG5leHBvcnQgY2xhc3MgU3RydWN0dXJlTWFwe1xyXG4gICAgc291cmNlbWFwOlNvdXJjZUluZm9bXSA9IFtdO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogY3JlYXRlcyBhIG1hcCBvZiB0aGUgbmF0dXJlYWwgc3RydWN0dXJlcyBpbiB0aGUgcm9vbSBvbiBzdGFydHVwXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKHJvb206IFJvb20pIHtcclxuICAgICAgICB2YXIgc291cmNlcyA9IHJvb20uZmluZChGSU5EX1NPVVJDRVMpO1xyXG4gICAgICAgIHNvdXJjZXMuZm9yRWFjaChzb3VyY2UgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnNvdXJjZW1hcC5wdXNoKG5ldyBTb3VyY2VJbmZvKHNvdXJjZSkpXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIFNvdXJjZUluZm97XHJcbiAgICBwb3M6Um9vbVBvc2l0aW9uO1xyXG4gICAgc3BhY2VzOiBudW1iZXIgPSAwO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogcXVpY2sgYWNjZXNzIG9iamVjdCBmb3Igc291cmNlc1xyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3Rvcihzb3VyY2U6IFNvdXJjZSkge1xyXG4gICAgICAgIHRoaXMucG9zID0gc291cmNlLnBvcztcclxuICAgICAgICB2YXIgbGVmdCA9IHRoaXMucG9zLnggLTE7XHJcbiAgICAgICAgdmFyIHJpZ2h0ID0gdGhpcy5wb3MueCArIDE7XHJcbiAgICAgICAgdmFyIHRvcCA9IHRoaXMucG9zLnkgLSAxO1xyXG4gICAgICAgIHZhciBib3QgPSB0aGlzLnBvcy55ICsgMTtcclxuICAgICAgICAvLyBsb29wIHRocm91Z2ggcG9zaXRpb25zIGFyb3VuZCBzb3VyY2UgYW5kIGNoZWNrIGZvciBlbXB0eSBzcGFjZXNcclxuICAgICAgICBmb3IgKGxldCB4ID0gbGVmdDsgeCA8PSByaWdodDsgeCsrKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IHkgPSB0b3A7IHkgPD0gYm90OyB5KyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBzcG90ID0gc291cmNlLnJvb20ubG9va0F0KHgseSk7XHJcbiAgICAgICAgICAgICAgICBpZihzcG90WzBdLnR5cGUgPT0gXCJ0ZXJyYWluXCIgJiYgc3BvdFswXS50ZXJyYWluICE9IFwid2FsbFwiKXtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNwYWNlcyArPSAxO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxufVxyXG5cclxuXHJcblxyXG4iLCJpbXBvcnQgeyBTdHJ1Y3R1cmVNYXAgfSBmcm9tIFwiLi9Sb29tTWFuYWdlci9Sb29tTWFuYWdlck1vZGVsc1wiO1xyXG5cclxuXHJcbmV4cG9ydCBtb2R1bGUgR2xvYmFse1xyXG4gICAgXHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBSb29tTWVte1xyXG4gICAgaXNTZXR1cDpib29sZWFuID1mYWxzZTtcclxuICAgIFN0cnVjdE1hcDpTdHJ1Y3R1cmVNYXA7XHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKGRhdGE6IFJvb21NZW1vcnkpIHtcclxuICAgICAgICB0aGlzLlN0cnVjdE1hcCA9IGRhdGEuU3RydWN0TWFwO1xyXG4gICAgICAgIFxyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IEdsb2JhbCwgUm9vbU1lbSB9IGZyb20gJy4uL0dsb2JhbCc7XHJcbmltcG9ydCB7IFN0cnVjdHVyZU1hcCB9IGZyb20gJy4vUm9vbU1hbmFnZXJNb2RlbHMnO1xyXG5pbXBvcnQgKiBhcyBfIGZyb20gXCJsb2Rhc2hcIjtcclxuXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gU2V0dXAoKXtcclxuICAgIGZvciAodmFyIGtleSBpbiBHYW1lLnJvb21zKSB7XHJcbiAgICAgICAgdmFyIHJvb20gPSBHYW1lLnJvb21zW2tleV07XHJcbiAgICAgICAgdmFyIHJvb21NZW0gPSAocm9vbS5tZW1vcnkgYXMgUm9vbU1lbSk7XHJcbiAgICAgICAgaWYoIXJvb21NZW0uaXNTZXR1cCl7XHJcbiAgICAgICAgICAgIENyZWF0ZVN0cnVjdHVyZU1hcChyb29tKTtcclxuICAgICAgICAgICAgQ3JlYXRlU3RhcnRpbmdQYXRocyhyb29tKTtcclxuICAgICAgICAgICAgcm9vbU1lbS5pc1NldHVwID0gdHJ1ZTtcclxuICAgICAgICAgICAgcm9vbS5tZW1vcnkgPSByb29tTWVtO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG59XHJcblxyXG5mdW5jdGlvbiBDcmVhdGVTdHJ1Y3R1cmVNYXAocm9vbTogUm9vbSl7XHJcbiAgICB2YXIgcm9vbU1lbSA9ICBuZXcgUm9vbU1lbShyb29tLm1lbW9yeSk7XHJcbiAgICBpZighcm9vbU1lbS5TdHJ1Y3RNYXApe1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiU2V0dGluZyB1cCBzdHJ1Y3R1cmUgbWFwIGZvciByb29tOiBcIiwgcm9vbS5uYW1lKTtcclxuICAgICAgICByb29tTWVtLlN0cnVjdE1hcCA9IG5ldyBTdHJ1Y3R1cmVNYXAocm9vbSk7XHJcbiAgICAgICAgcm9vbS5tZW1vcnkgPSByb29tTWVtO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBDcmVhdGVTdGFydGluZ1BhdGhzKHJvb206IFJvb20pe1xyXG4gICAgdmFyIHNwYXduID0gcm9vbS5maW5kKEZJTkRfTVlfU1BBV05TKVswXTtcclxuICAgIChyb29tLm1lbW9yeSBhcyBSb29tTWVtKS5TdHJ1Y3RNYXAuc291cmNlbWFwLmZvckVhY2goc291cmNlID0+IHtcclxuICAgICAgICB2YXIgb3B0czogRmluZFBhdGhPcHRzICA9IHt9O1xyXG4gICAgICAgIHZhciBwYXRoID0gcm9vbS5maW5kUGF0aChzcGF3bi5wb3MsIHNvdXJjZS5wb3MgKVxyXG4gICAgICAgIHBhdGguZm9yRWFjaChwb3NpdGlvbiA9PiB7XHJcbiAgICAgICAgICAgIHJvb20uY3JlYXRlQ29uc3RydWN0aW9uU2l0ZShwb3NpdGlvbi54LCBwb3NpdGlvbi55LCBTVFJVQ1RVUkVfUk9BRCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuICAgIGlmKHJvb20uY29udHJvbGxlcil7XHJcbiAgICAgICAgdmFyIGN0ciA9IChyb29tLmNvbnRyb2xsZXIgYXMgU3RydWN0dXJlQ29udHJvbGxlcik7XHJcbiAgICAgICAgdmFyIHBhdGggPSByb29tLmZpbmRQYXRoKHNwYXduLnBvcywgY3RyLnBvcyApXHJcbiAgICAgICAgcGF0aC5mb3JFYWNoKHBvc2l0aW9uID0+IHtcclxuICAgICAgICAgICAgcm9vbS5jcmVhdGVDb25zdHJ1Y3Rpb25TaXRlKHBvc2l0aW9uLngsIHBvc2l0aW9uLnksIFNUUlVDVFVSRV9ST0FEKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufSIsImltcG9ydCAqIGFzIFJNIGZyb20gXCIuL1Jvb21NYW5hZ2VyL2luZGV4XCJcclxuXHJcbmV4cG9ydCBjb25zdCBsb29wID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgUk0uU2V0dXAoKTtcclxufSJdLCJzb3VyY2VSb290IjoiIn0=